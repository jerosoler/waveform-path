(function(H,R){typeof exports=="object"&&typeof module<"u"?R(exports):typeof define=="function"&&define.amd?define(["exports"],R):(H=typeof globalThis<"u"?globalThis:H||self,R(H["waveform-path"]={}))})(this,function(H){"use strict";const R=b=>{window.AudioContext=window.AudioContext||window.webkitAudioContext;const v=new AudioContext;return fetch(b).then(w=>w.arrayBuffer()).then(w=>v.decodeAudioData(w)).catch(w=>{console.error(w)})},Y=(b,v)=>{const{channel:w=0,samples:A=b.length,height:t=100,width:c=800,top:g=0,left:l=0,type:m="steps",paths:e=[{d:"Q",sx:0,sy:0,x:50,y:100,ex:100,ey:0}],animation:E=!1,animationframes:q=10,normalize:J=!0}=v,o=K(b,w,E,q),B=U(o,A),N=J?X(B):B;let y="";const D=m!="bars"?(t+g*2)/2:t+g,p=c/A,V=e.length,z=m=="mirror"?V*2:V,G=N.length;for(let M=0;M<G;M++){if(M>0){const f=y.length;y.charAt(f-1)==";"||f===0?y+=" M 0 0 ;":y+=";"}let $=-9999,h=-9999;for(let f=0;f<A;f++){const k=m!="bars"?f%2?1:-1:1;let x=1;for(let T=0;T<z;T++){let n=T;T>=V&&(n=T-V,x=-1),e[n].minshow=e[n].minshow??0,e[n].maxshow=e[n].maxshow??1,e[n].normalize=e[n].normalize??!1;const u=e[n].normalize?1:N[M][f];if(e[n].minshow<=N[M][f]&&e[n].maxshow>=N[M][f])switch(e[n].d){case"L":{const _=f*p+p*e[n].sx/100+l,a=D+u*e[n].sy/100*(m!="bars"?t/2:t)*-k*x,r=f*p+p*e[n].ex/100+l,i=D+u*e[n].ey/100*(m!="bars"?t/2:t)*-k*x;(_!==$||a!==h)&&(y+=`M ${_} ${a} `),y+=`L ${r} ${i} `,$=r,h=i;break}case"H":{const _=f*p+p*e[n].sx/100+l,a=D+u*e[n].y/100*(m!="bars"?t/2:t)*-k*x,r=f*p+p*e[n].ex/100+l,i=a;(_!==$||a!==h)&&(y+=`M ${_} ${a} `),y+=`H ${r} `,$=r,h=i;break}case"V":{const _=f*p+p*e[n].x/100+l,a=D+u*e[n].sy/100*(m!="bars"?t/2:t)*-k*x,r=_,i=D+u*e[n].ey/100*(m!="bars"?t/2:t)*-k*x;(_!==$||a!==h)&&(y+=`M ${_} ${a} `),y+=`V ${i} `,$=r,h=i;break}case"C":{const _=f*p+p*e[n].sx/100+l,a=D-D*e[n].sy/100*k,r=f*p+p*e[n].x/100+l,i=D+u*e[n].y/100*(m!="bars"?t:t*2)*-k*x,C=f*p+p*e[n].ex/100+l,s=D-D*e[n].ey/100*k;(_!==$||a!==h)&&(y+=`M ${_} ${a} `),y+=`C ${_} ${a} ${r} ${i} ${C} ${s} `,$=C,h=s;break}case"Q":{const _=f*p+p*e[n].sx/100+l,a=D+u*e[n].sy/100*(m!="bars"?t/2:t)*-k*x,r=f*p+p*e[n].x/100+l,i=D+u*e[n].y/100*(m!="bars"?t:t*2)*-k*x,C=f*p+p*e[n].ex/100+l,s=D+u*e[n].ey/100*(m!="bars"?t/2:t)*-k*x;(_!==$||a!==h)&&(y+=`M ${_} ${a} `),y+=`Q ${r} ${i} ${C} ${s} `,$=C,h=s;break}case"A":{const _=f*p+p*e[n].sx/100+l,a=D+u*e[n].sy/100*(m!="bars"?t/2:t)*-k*x,r=f*p+p*e[n].ex/100+l,i=D+u*e[n].ey/100*(m!="bars"?t/2:t)*-k*x;(_!==$||a!==h)&&(y+=`M ${_} ${a} `);const C=e[n].rx*p/100,s=e[n].ry*p/100;let d=e[n].sweep;k==-1&&(d==1?d=0:d=1),x==-1&&(d==1?d=0:d=1),y+=`A ${C} ${s} ${e[n].angle} ${e[n].arc} ${d} ${r} ${i} `,$=r,h=i;break}case"Z":y+="Z ";break}}}}return y},tt=(b,v)=>{const{channel:w=0,samples:A=b.length,distance:t=50,length:c=100,top:g=0,left:l=0,type:m="steps",startdeg:e=0,enddeg:E=360,invertdeg:q=!1,invertpath:J=!1,paths:o=[{d:"Q",sdeg:0,sr:0,deg:50,r:100,edeg:100,er:0}],animation:B=!1,animationframes:N=10,normalize:y=!0}=v,D=K(b,w,B,N),p=U(D,A),V=y?X(p):p;let z="";const G=E<e?E+360:E,M=q?(e-G)/A:(G-e)/A,$=q?90+e+180:90+e,h=J?-1:1,f=o.length,k=m=="mirror"?f*2:f,x=Math.PI/180,T=V.length;for(let n=0;n<T;n++){if(n>0){const a=z.length;z.charAt(a-1)==";"||a===0?z+=" M 0 0 ;":z+=";"}let u=-9999,_=-9999;for(let a=0;a<A;a++){const r=m!="bars"?a%2?1:-1:1;let i=1;for(let C=0;C<k;C++){let s=C;C>=f&&(s=C-f,i=-1),o[s].minshow=o[s].minshow??0,o[s].maxshow=o[s].maxshow??1,o[s].normalize=o[s].normalize??!1;const d=o[s].normalize?1:V[n][a];if(o[s].minshow<=V[n][a]&&o[s].maxshow>=V[n][a])switch(o[s].d){case"L":{const P=(M*(a+o[s].sdeg/100)-$)*x,Q=(M*(a+o[s].edeg/100)-$)*x,j=l+(c*(o[s].sr/100)*d*r*i*h+t)*Math.cos(P),L=g+(c*(o[s].sr/100)*d*r*i*h+t)*Math.sin(P),S=l+(c*(o[s].er/100)*d*r*i*h+t)*Math.cos(Q),Z=g+(c*(o[s].er/100)*d*r*i*h+t)*Math.sin(Q);(j!==u||L!==_)&&(z+=`M ${j} ${L} `),z+=`L ${S} ${Z} `,u=S,_=Z;break}case"C":{const P=(M*(a+o[s].sdeg/100)-$)*x,Q=(M*(a+o[s].deg/100)-$)*x,j=(M*(a+o[s].edeg/100)-$)*x,L=l+(c*(o[s].sr/100)*d*r*i*h+t)*Math.cos(P),S=g+(c*(o[s].sr/100)*d*r*i*h+t)*Math.sin(P),Z=l+(c*(o[s].r/100)*d*r*i*h+t)*Math.cos(Q),W=g+(c*(o[s].r/100)*d*r*i*h+t)*Math.sin(Q),F=l+(c*(o[s].er/100)*d*r*i*h+t)*Math.cos(j),O=g+(c*(o[s].er/100)*d*r*i*h+t)*Math.sin(j);(L!==u||S!==_)&&(z+=`M ${L} ${S} `),z+=`C ${L} ${S} ${Z} ${W} ${F} ${O} `,u=F,_=O;break}case"Q":{const P=(M*(a+o[s].sdeg/100)-$)*x,Q=(M*(a+o[s].deg/100)-$)*x,j=(M*(a+o[s].edeg/100)-$)*x,L=l+(c*(o[s].sr/100)*d*r*i*h+t)*Math.cos(P),S=g+(c*(o[s].sr/100)*d*r*i*h+t)*Math.sin(P),Z=l+(c*(o[s].r/100)*d*r*i*h+t)*Math.cos(Q),W=g+(c*(o[s].r/100)*d*r*i*h+t)*Math.sin(Q),F=l+(c*(o[s].er/100)*d*r*i*h+t)*Math.cos(j),O=g+(c*(o[s].er/100)*d*r*i*h+t)*Math.sin(j);(L!==u||S!==_)&&(z+=`M ${L} ${S} `),z+=`Q ${Z} ${W} ${F} ${O} `,u=F,_=O;break}case"A":{const P=(M*(a+o[s].sdeg/100)-$)*x,Q=(M*(a+o[s].edeg/100)-$)*x,j=l+(c*(o[s].sr/100)*d*r*i*h+t)*Math.cos(P),L=g+(c*(o[s].sr/100)*d*r*i*h+t)*Math.sin(P),S=l+(c*(o[s].er/100)*d*r*i*h+t)*Math.cos(Q),Z=g+(c*(o[s].er/100)*d*r*i*h+t)*Math.sin(Q);(j!==u||L!==_)&&(z+=`M ${j} ${L} `);const W=M*a*o[s].angle/100,F=o[s].rx*M/100,O=o[s].ry*M/100;let I=o[s].sweep;r==-1&&(I==1?I=0:I=1),i==-1&&(I==1?I=0:I=1),z+=`A ${F} ${O} ${W} ${o[s].arc} ${I} ${S} ${Z} `,u=S,_=Z;break}case"Z":z+="Z ";break}}}}return z},K=(b,v,w,A)=>{const t=b.getChannelData(v),c=[];if(w){const g=b.sampleRate/A;for(let l=0;l<t.length;l+=g){const m=t.slice(l,l+g);c.push(m)}}else c.push(t);return c},U=(b,v)=>{const w=[],A=b.length;for(let t=0;t<A;t++){const c=Math.floor(b[t].length/v),g=[];for(let l=0;l<v;l++){let m=c*l,e=0;for(let E=0;E<c;E++)e=e+Math.abs(b[t][m+E]);g.push(e/c)}w.push(g)}return w},X=b=>{const v=[],w=b.length;for(let c=0;c<w;c++){const g=Math.max(...b[c]);v.push(g)}const A=Math.pow(Math.max(...v),-1),t=[];for(let c=0;c<w;c++){const g=b[c].map(l=>l*A);t.push(g)}return t};H.getAudioData=R,H.linearPath=Y,H.polarPath=tt,Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})});
